package ru.home.swap.wallet.contract

import android.util.Log
import org.web3j.abi.FunctionEncoder
import org.web3j.abi.datatypes.Address
import org.web3j.abi.datatypes.Function
import org.web3j.abi.datatypes.Utf8String
import org.web3j.crypto.Credentials
import org.web3j.protocol.Web3j
import org.web3j.protocol.core.RemoteCall
import org.web3j.protocol.core.RemoteFunctionCall
import org.web3j.protocol.core.methods.response.TransactionReceipt
import org.web3j.tx.Contract
import org.web3j.tx.TransactionManager
import org.web3j.tx.gas.ContractGasProvider
import ru.home.swap.core.App
import java.util.*

class SwapChain : Contract, ISwapChain {

    object Const {
        const val CONTRACT_BINARY =
            "0x60806040523480156200001157600080fd5b50604051620026543803806200265483398181016040528101906200003791906200012a565b81600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505062000171565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620000f282620000c5565b9050919050565b6200010481620000e5565b81146200011057600080fd5b50565b6000815190506200012481620000f9565b92915050565b60008060408385031215620001445762000143620000c0565b5b6000620001548582860162000113565b9250506020620001678582860162000113565b9150509250929050565b6124d380620001816000396000f3fe608060405234801561001057600080fd5b50600436106100615760003560e01c8062ce8e3e1461006657806304310fda146100845780632199d5cd146100a05780633548ff9d146100bc578063648ae902146100d8578063c7fba34f146100f4575b600080fd5b61006e610110565b60405161007b91906117aa565b60405180910390f35b61009e60048036038101906100999190611804565b61019e565b005b6100ba60048036038101906100b5919061185d565b610bc4565b005b6100d660048036038101906100d19190611804565b610c7a565b005b6100f260048036038101906100ed9190611804565b610ccc565b005b61010e600480360381019061010991906118a9565b610ccf565b005b6060600280548060200260200160405190810160405280929190818152602001828054801561019457602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001906001019080831161014a575b5050505050905090565b8060000160208101906101b1919061185d565b8160400160208101906101c4919061185d565b8173ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061022957508073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b610268576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161025f9061199b565b60405180910390fd5b82600001602081019061027b919061185d565b83604001602081019061028e919061185d565b6001151561029b83610cd2565b1515146102dd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102d490611a2d565b60405180910390fd5b600115156102ea82610cd2565b15151461032c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161032390611abf565b60405180910390fd5b8480360381019061033d9190611c83565b6001151560008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663761610fc83602001516040518263ffffffff1660e01b815260040161039e9190611cbf565b60006040518083038186803b1580156103b657600080fd5b505afa1580156103ca573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052508101906103f39190611e8a565b606001511515141580156104c157506001151560008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663761610fc83606001516040518263ffffffff1660e01b81526004016104639190611cbf565b60006040518083038186803b15801561047b57600080fd5b505afa15801561048f573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052508101906104b89190611e8a565b60600151151514155b610500576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104f790611f45565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663761610fc82602001516040518263ffffffff1660e01b815260040161055d9190611cbf565b60006040518083038186803b15801561057557600080fd5b505afa158015610589573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052508101906105b29190611e8a565b6040015142108015610678575060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663761610fc82606001516040518263ffffffff1660e01b815260040161061c9190611cbf565b60006040518083038186803b15801561063457600080fd5b505afa158015610648573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052508101906106719190611e8a565b6040015142105b6106b7576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106ae90611fd7565b60405180910390fd5b60006106d2878036038101906106cd9190611c83565b610d81565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60000b81141561073a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161073190612069565b60405180910390fd5b600061076a886000016020810190610752919061185d565b896040016020810190610765919061185d565b6110fe565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60000b8114156107d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107c9906120fb565b60405180910390fd5b60006003600083815260200190815260200160002083815481106107f9576107f861211b565b5b90600052602060002090600502016040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600382015481526020016004820160009054906101000a900460ff161515151581526020016004820160019054906101000a900460ff16151515158152505090508060800151801561091c57508060a001515b61095b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610952906121bc565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16632b910aa282602001516040518263ffffffff1660e01b81526004016109b89190611cbf565b600060405180830381600087803b1580156109d257600080fd5b505af11580156109e6573d6000803e3d6000fd5b5050505060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16632b910aa282606001516040518263ffffffff1660e01b8152600401610a479190611cbf565b600060405180830381600087803b158015610a6157600080fd5b505af1158015610a75573d6000803e3d6000fd5b5050505060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166342842e0e8260000151836040015184602001516040518463ffffffff1660e01b8152600401610ae2939291906121eb565b600060405180830381600087803b158015610afc57600080fd5b505af1158015610b10573d6000803e3d6000fd5b5050505060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166342842e0e8260400151836000015184606001516040518463ffffffff1660e01b8152600401610b7d939291906121eb565b600060405180830381600087803b158015610b9757600080fd5b505af1158015610bab573d6000803e3d6000fd5b50505050610bb982846112e0565b505050505050505050565b60011515610bd182610cd2565b15151415610c14576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c0b9061226e565b60405180910390fd5b6002819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600060019050600115158115151415610cc8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cbf9061234c565b60405180910390fd5b5050565b50565b50565b600080600090505b600280549050811015610d76578273ffffffffffffffffffffffffffffffffffffffff1660028281548110610d1257610d1161211b565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610d63576001915050610d7c565b8080610d6e9061239b565b915050610cda565b50600090505b919050565b6000807fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60000b90506000610dbe846000015185604001516110fe565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60000b811415610df55781925050506110f9565b600060036000838152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b82821015610f5257838290600052602060002090600502016040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600382015481526020016004820160009054906101000a900460ff161515151581526020016004820160019054906101000a900460ff16151515158152505081526020019060010190610e2a565b50505050905060005b81518110156110f1576000828281518110610f7957610f7861211b565b5b602002602001015190506000816000015173ffffffffffffffffffffffffffffffffffffffff16886000015173ffffffffffffffffffffffffffffffffffffffff16148015610ffb5750816040015173ffffffffffffffffffffffffffffffffffffffff16886040015173ffffffffffffffffffffffffffffffffffffffff16145b806110785750816040015173ffffffffffffffffffffffffffffffffffffffff16886000015173ffffffffffffffffffffffffffffffffffffffff161480156110775750816000015173ffffffffffffffffffffffffffffffffffffffff16886040015173ffffffffffffffffffffffffffffffffffffffff16145b5b905060008260200151896020015114801561109a575082606001518960600151145b806110bf5750826060015189602001511480156110be575082602001518960600151145b5b90508180156110cb5750805b156110db578396505050506110f1565b50505080806110e99061239b565b915050610f5b565b508293505050505b919050565b600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166329c9810b85856040518363ffffffff1660e01b815260040161115e9291906123e4565b60206040518083038186803b15801561117657600080fd5b505afa15801561118a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111ae919061240d565b90506000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166329c9810b85876040518363ffffffff1660e01b815260040161120f9291906123e4565b60206040518083038186803b15801561122757600080fd5b505afa15801561123b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061125f919061240d565b905060006003600084815260200190815260200160002080549050146112895781925050506112da565b60006003600083815260200190815260200160002080549050146112b15780925050506112da565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60000b925050505b92915050565b600060036000848152602001908152602001600020805480602002602001604051908101604052809291908181526020016000905b8282101561143d57838290600052602060002090600502016040518060c00160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600182015481526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600382015481526020016004820160009054906101000a900460ff161515151581526020016004820160019054906101000a900460ff16151515158152505081526020019060010190611315565b50505050905060008151141561145357506116b6565b6000805b60018351611465919061243a565b8110156115f05783811415611481578161147e9061239b565b91505b6001835161148f919061243a565b82111561149b576115dd565b8282815181106114ae576114ad61211b565b5b60200260200101516003600087815260200190815260200160002082815481106114db576114da61211b565b5b906000526020600020906005020160008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001015560408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506060820151816003015560808201518160040160006101000a81548160ff02191690831515021790555060a08201518160040160016101000a81548160ff02191690831515021790555090505081806115d99061239b565b9250505b80806115e89061239b565b915050611457565b50600360008581526020019081526020016000208054806116145761161361246e565b5b6001900381819060005260206000209060050201600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560018201600090556002820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560038201600090556004820160006101000a81549060ff02191690556004820160016101000a81549060ff02191690555050905550505b5050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000611711826116e6565b9050919050565b61172181611706565b82525050565b60006117338383611718565b60208301905092915050565b6000602082019050919050565b6000611757826116ba565b61176181856116c5565b935061176c836116d6565b8060005b8381101561179d5781516117848882611727565b975061178f8361173f565b925050600181019050611770565b5085935050505092915050565b600060208201905081810360008301526117c4818461174c565b905092915050565b6000604051905090565b600080fd5b600080fd5b600080fd5b600060c082840312156117fb576117fa6117e0565b5b81905092915050565b600060c0828403121561181a576118196117d6565b5b6000611828848285016117e5565b91505092915050565b61183a81611706565b811461184557600080fd5b50565b60008135905061185781611831565b92915050565b600060208284031215611873576118726117d6565b5b600061188184828501611848565b91505092915050565b600060a082840312156118a05761189f6117e0565b5b81905092915050565b6000602082840312156118bf576118be6117d6565b5b600082013567ffffffffffffffff8111156118dd576118dc6117db565b5b6118e98482850161188a565b91505092915050565b600082825260208201905092915050565b7f43616c6c65722073686f756c6420626520616e206f6e65206f6620746865207560008201527f7365727320646566696e656420696e2074686520706173736564206d6174636860208201527f206f626a6563742e000000000000000000000000000000000000000000000000604082015250565b60006119856048836118f2565b915061199082611903565b606082019050919050565b600060208201905081810360008301526119b481611978565b9050919050565b7f54686520666972737420757365722073686f756c64206265207265676973746560008201527f7265642e00000000000000000000000000000000000000000000000000000000602082015250565b6000611a176024836118f2565b9150611a22826119bb565b604082019050919050565b60006020820190508181036000830152611a4681611a0a565b9050919050565b7f546865207365636f6e6420757365722073686f756c642062652072656769737460008201527f657265642e000000000000000000000000000000000000000000000000000000602082015250565b6000611aa96025836118f2565b9150611ab482611a4d565b604082019050919050565b60006020820190508181036000830152611ad881611a9c565b9050919050565b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b611b2d82611ae4565b810181811067ffffffffffffffff82111715611b4c57611b4b611af5565b5b80604052505050565b6000611b5f6117cc565b9050611b6b8282611b24565b919050565b600080fd5b6000819050919050565b611b8881611b75565b8114611b9357600080fd5b50565b600081359050611ba581611b7f565b92915050565b60008115159050919050565b611bc081611bab565b8114611bcb57600080fd5b50565b600081359050611bdd81611bb7565b92915050565b600060c08284031215611bf957611bf8611adf565b5b611c0360c0611b55565b90506000611c1384828501611848565b6000830152506020611c2784828501611b96565b6020830152506040611c3b84828501611848565b6040830152506060611c4f84828501611b96565b6060830152506080611c6384828501611bce565b60808301525060a0611c7784828501611bce565b60a08301525092915050565b600060c08284031215611c9957611c986117d6565b5b6000611ca784828501611be3565b91505092915050565b611cb981611b75565b82525050565b6000602082019050611cd46000830184611cb0565b92915050565b600080fd5b600080fd5b600067ffffffffffffffff821115611cff57611cfe611af5565b5b611d0882611ae4565b9050602081019050919050565b60005b83811015611d33578082015181840152602081019050611d18565b83811115611d42576000848401525b50505050565b6000611d5b611d5684611ce4565b611b55565b905082815260208101848484011115611d7757611d76611cdf565b5b611d82848285611d15565b509392505050565b600082601f830112611d9f57611d9e611cda565b5b8151611daf848260208601611d48565b91505092915050565b600081519050611dc781611b7f565b92915050565b600081519050611ddc81611bb7565b92915050565b600060a08284031215611df857611df7611adf565b5b611e0260a0611b55565b9050600082015167ffffffffffffffff811115611e2257611e21611b70565b5b611e2e84828501611d8a565b6000830152506020611e4284828501611db8565b6020830152506040611e5684828501611db8565b6040830152506060611e6a84828501611dcd565b6060830152506080611e7e84828501611db8565b60808301525092915050565b600060208284031215611ea057611e9f6117d6565b5b600082015167ffffffffffffffff811115611ebe57611ebd6117db565b5b611eca84828501611de2565b91505092915050565b7f546f6b656e732073686f756c64206e6f7420626520616c726561647920636f6e60008201527f73756d65642e0000000000000000000000000000000000000000000000000000602082015250565b6000611f2f6026836118f2565b9150611f3a82611ed3565b604082019050919050565b60006020820190508181036000830152611f5e81611f22565b9050919050565b7f4f6e65206f7220626f746820746f6b656e7320686173206265656e206578706960008201527f7265642e00000000000000000000000000000000000000000000000000000000602082015250565b6000611fc16024836118f2565b9150611fcc82611f65565b604082019050919050565b60006020820190508181036000830152611ff081611fb4565b9050919050565b7f4d61746368206974656d206973206e6f7420666f756e642e2044696420796f7560008201527f207061737320636f7272656374206d61746368206f626a6563743f0000000000602082015250565b6000612053603b836118f2565b915061205e82611ff7565b604082019050919050565b6000602082019050818103600083015261208281612046565b9050919050565b7f436f756c64206e6f742066696e642061206d617463682e20446f20796f75206860008201527f61766520697420696e2073746f726167653f0000000000000000000000000000602082015250565b60006120e56032836118f2565b91506120f082612089565b604082019050919050565b60006020820190508181036000830152612114816120d8565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4f6e65206f7220626f7468207573657273206861736e277420636f6e6669726d60008201527f65642079657420737761702e0000000000000000000000000000000000000000602082015250565b60006121a6602c836118f2565b91506121b18261214a565b604082019050919050565b600060208201905081810360008301526121d581612199565b9050919050565b6121e581611706565b82525050565b600060608201905061220060008301866121dc565b61220d60208301856121dc565b61221a6040830184611cb0565b949350505050565b7f5573657220616c726561647920726567697374657265642e0000000000000000600082015250565b60006122586018836118f2565b915061226382612222565b602082019050919050565b600060208201905081810360008301526122878161224b565b9050919050565b7f4172746966696369616c6c79206d61646520627265616b20706f696e743a207360008201527f75636365737366756c6c7920706173736564205f7377617056616c7565436f6e60208201527f7472616374206d6f6469666965727320636865636b732c20726561636820626560408201527f67696e696e67206f662074686520636f6e7472616374206d6574686f642e0000606082015250565b6000612336607e836118f2565b91506123418261228e565b608082019050919050565b6000602082019050818103600083015261236581612329565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006123a682611b75565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156123d9576123d861236c565b5b600182019050919050565b60006040820190506123f960008301856121dc565b61240660208301846121dc565b9392505050565b600060208284031215612423576124226117d6565b5b600061243184828501611db8565b91505092915050565b600061244582611b75565b915061245083611b75565b9250828210156124635761246261236c565b5b828203905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603160045260246000fdfea2646970667358221220f65fc224d4804c223e4b2db4b6c94cae55d87330ba06a216d091ab4d863fc38864736f6c63430008090033"
    }

    fun deploy(
        web3j: Web3j?,
        credentials: Credentials?,
        contractGasProvider: ContractGasProvider?
    ): RemoteCall<SwapChain?>? {
        /*
        *         address utilsAddr,
        address valueToken,
        address matchDynamicArray
        * */
        val encodedConstructor = FunctionEncoder.encodeConstructor(
            listOf(/*Address(utilsAddr), Address(valueToken), Address(matchDynamicArray)*/)
        )
        return deployRemoteCall(
            SwapChain::class.java,
            web3j,
            credentials,
            contractGasProvider,
            Const.CONTRACT_BINARY,
            encodedConstructor
        )
    }
    companion object {
        @Deprecated(message =
        "Only replay-protected (EIP-155) transactions allowed over RPC "
                + "which requires chainId maintained by RawTransactionManager",
            replaceWith = ReplaceWith("SwapChain().load(\n" +
                    "            contractAddress: String?,\n" +
                    "            web3j: Web3j?,\n" +
                    "            transactionManager: TransactionManager,\n" +
                    "            contractGasProvider: ContractGasProvider?\n" +
                    "        )"
            )
        )
        @JvmStatic
        fun load(
            contractAddress: String?,
            web3j: Web3j?,
            credentials: Credentials?,
            contractGasProvider: ContractGasProvider?
        ): SwapChain {
            return SwapChain(Const.CONTRACT_BINARY, contractAddress, web3j, credentials, contractGasProvider)
        }

        @JvmStatic
        fun load(
            contractAddress: String?,
            web3j: Web3j?,
            transactionManager: TransactionManager,
            contractGasProvider: ContractGasProvider?
        ): SwapChain {
            return SwapChain(Const.CONTRACT_BINARY, contractAddress, web3j, transactionManager, contractGasProvider)
        }
    }

    protected constructor(
        contractBinary: String?,
        contractAddress: String?,
        web3j: Web3j?,
        credentials: Credentials?,
        gasProvider: ContractGasProvider?
    ): super(contractBinary, contractAddress, web3j, credentials, gasProvider) {
        // no op
    }

    protected constructor(
        contractBinary: String?,
        contractAddress: String?,
        web3j: Web3j?,
        transactionManager: TransactionManager,
        contractGasProvider: ContractGasProvider?
    ): super(contractBinary, contractAddress, web3j, transactionManager, contractGasProvider) {
        // no op
    }

    override fun registerUser(userWalletAddress: String): RemoteFunctionCall<TransactionReceipt> {
        val function = Function(
            ISwapChain.Functions.FUNC_REGISTER_USER,
            listOf(Address(userWalletAddress)),
            emptyList()
        )

        return executeRemoteCallTransaction(function)
    }

    override fun approveSwap(userFirstAddress: String, userSecondAddress: String, matchObj: Match): RemoteFunctionCall<TransactionReceipt> {
        val function = Function(
            ISwapChain.Functions.FUNC_APPROVE_SWAP,
            listOf(
                Address(userFirstAddress),
                Address(userSecondAddress),
                matchObj
            ),
            emptyList()
        )
        return executeRemoteCallTransaction(function)
    }

    override fun registerDemand(
        userAddress: String,
        demand: String
    ): RemoteFunctionCall<TransactionReceipt> {
        val function = Function(
            ISwapChain.Functions.FUNC_REGISTER_DEMAND,
            listOf(Address(userAddress), Utf8String(demand)),
            emptyList()
        )

        return executeRemoteCallTransaction(function)
    }

}